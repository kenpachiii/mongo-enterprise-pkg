{
    "id": "com.bitnami.mongodb-enterprise",
    "name": "mongodb-enterprise",
    "extends": ["Service"],
    "revision": "3",
    "author": {
        "name": "Bitnami",
        "url": "https://bitnami.com"
    },
    "version": "4.0.6",
    "properties": {
        "mongodbPort": {
            "default": 27017,
            "description": "MongoDB Port"
        },
        "advertisedHostname": {
            "default": "",
            "description": "MongoDB node advertised hostname"
        },
        "database": {
            "default": "",
            "description": "Database to create"
        },
        "username": {
            "default": "",
            "description": "MongoDB custom user"
        },
        "password": {
            "default": "",
            "type": "password",
            "description": "MongoDB custom user password"
        },
        "rootPassword": {
            "default": "",
            "type": "password",
            "description": "MongoDB admin password"
        },
        "replicaSetMode": {
            "default": "",
            "description": "MongoDB replica set mode",
            "type": "choice",
            "validValues": [
                "primary",
                "secondary",
                "arbiter",
                ""
            ]
        },
        "replicaSetKey": {
            "default": "",
            "description": "MongoDB key for replica set authentication",
            "type": "password"
        },
        "replicaSetName": {
            "default": "replicaset",
            "description": "MongoDB replica set name"
        },
        "enableMajorityReadConcern": {
            "default": "yes",
            "type": "choice",
            "validValues": [
                "yes",
                "no"
            ],
            "description": "Whether to enable/disable majority read concern"
        },
        "primaryHost": {
            "default": "",
            "description": "MongoDB primary host"
        },
        "primaryPort": {
            "default": "27017",
            "description": "MongoDB primary port"
        },
        "primaryRootUser": {
            "default": "root",
            "description": "MongoDB primary root user"
        },
        "primaryRootPassword": {
            "default": "",
            "description": "MongoDB primary root user password",
            "type": "password"
        },
        "configFileProvider": {
            "default": "nami",
            "description": "MongoDB configuration file provider"
        },
        "systemLogVerbosity": {
            "default": "0",
            "description": "MongoDB system log verbosity level",
            "type": "choice",
            "validValues": [
                "0",
                "1",
                "2",
                "3",
                "4",
                "5"
            ]
        },
        "enableDirectoryPerDB": {
            "default": "no",
            "type": "choice",
            "validValues": [
                "yes",
                "no"
            ],
            "description": "Whether to enable/disable directoryPerDB option on MongoDB"
        },
        "enableIPv6": {
            "default": "yes",
            "type": "choice",
            "validValues": [
                "yes",
                "no"
            ],
            "description": "Whether to enable/disable IPv6 on MongoDB"
        },
        "disableSystemLog": {
            "default": "no",
            "type": "choice",
            "validValues": [
                "yes",
                "no"
            ],
            "description": "Whether to enable/disable system log on MongoDB"
        },
        "systemUser": {
            "value": "mongo"
        },
        "systemGroup": {
            "value": "mongo"
        },
        "dataToPersist": {
            "value": ["{{$app.dataDir}}"]
        },
        "persistDir": {
            "description": "Directory to backup application folders",
            "default": "/bitnami/mongodb"
        },
        "monitFile": {
            "value": "extra/monit.conf"
        },
        "logrotateFile": {
            "value": "extra/logrotate.conf"
        },
        "bnsupportLogs": {
            "value": "{{$app.logFile}}"
        },
        "bnsupportConf": {
            "value": "{{$app.confFile}}"
        }
    },
    "service": {
        "confFile": "{{$app.confDir}}/mongodb.conf",
        "pidFile": "{{$app.tmpDir}}/mongodb.pid",
        "logFile": "{{$app.logsDir}}/mongodb.log",
        "socketFile": "{{$app.tmpDir}}/mongodb-{{$app.mongodbPort}}.sock",
        "ports": ["{{$app.mongodbPort}}"],
        "start": {
            "timeout": 180,
            "wait": 5,
            "username": "mongo",
            "command": "{{$app.installdir}}/bin/mongod --config {{$app.confFile}}"
        }
    },
    "installation": {
        "prefix": "mongodb",
        "packaging": {
            "components": [{
                "name": "mongodb",
                "owner": "root",
                "folders": [{
                    "name": "mongodb",
                    "files": [{
                        "origin": ["files/mongodb/*"]
                    }]
                }]
            }]
        }
    }
}